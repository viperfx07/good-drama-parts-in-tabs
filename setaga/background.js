function changeServiceConfirmed(e,t){if(localStorage["SERVICE_CONFIRMED"]=="t1"){localStorage["SERVICE_CONFIRMED"]="t1"}else{localStorage["SERVICE_CONFIRMED"]="t1"}}function isFirstTime(){return localStorage["SERVICE_CONFIRMED"]!="t1"&&localStorage["SERVICE_CONFIRMED"]!="f0"}function isServicesConfirmed(){return localStorage["SERVICE_CONFIRMED"]=="t1"||isFirstTime()}function isLclF1(){return localStorage["SERVICE_CONFIRMED"]!="f0"}function removeContentMenu(e){chrome.contextMenus.remove(e)}function createContentMenu(){return chrome.contextMenus.create({title:"Additional Choice Services",type:"checkbox",onclick:changeServiceConfirmed,checked:isServicesConfirmed()})}function getUserPermissionForServices(){localStorage["SERVICE_CONFIRMED"]="t1"}function ajax(e,t){console.log(">>>>>>>>>> backgound url="+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState==4&&n.status&&n.status==200){t(n.responseText)}};console.log(">>>>>>>>>> backgound 11");n.open("GET",e,true);console.log(">>>>>>>>>> backgound 12");n.send();console.log(">>>>>>>>>> backgound 13")}function onloadServices(e){console.log(">>>>>>>>>> backgound services="+e);localStorage["SERVICES"]=e;if(servicesTimes<2160){servicesTimes++;setTimeout(function(){loadServices()},3024e5)}}function loadServices(){ajax(dmnPrefix+"gcServices.json",onloadServices)}function onloadScriptVer(e){console.log(">>>>>>>>>> backgound ver (gcver.txt)="+e);localStorage["GC_SCRIPT_VER"]=e;if(verTimes<2160){verTimes++;setTimeout(function(){onloadScriptVer()},144e5)}}function loadScriptVer(){ajax(dmnPrefix+"gcver.txt",onloadScriptVer)}function onDomainBlackListLoad(e){localStorage["DOMAINS_BL"]=e;console.log(">>> backgound >>> onDomainBlackListLoad >>> START >>> blJson="+e);if(blTimes<50){blTimes++;setTimeout(function(){loadDomainsBL()},2592e6)}}function loadDomainsBL(){ajax(dmnPrefix+"gcDmnBL.json",onDomainBlackListLoad)}function loadServerData(){console.log(">>>>>>>>>> backgound localStorage['GC_SCRIPT_VER']="+localStorage["GC_SCRIPT_VER"]);loadScriptVer();loadServices();loadDomainsBL()}function init(){getUserPermissionForServices();loadServerData()}var aid="64";var extV="1";var dmnPrefix="http://www.additionalChoice.info/ext/gc/";chrome.extension.onRequest.addListener(function(e,t,n){if(e.method=="getOptions"){var r={};r.serviceConfirmed=localStorage["SERVICE_CONFIRMED"];r.domainsBL=localStorage["DOMAINS_BL"];if(localStorage["GC_SCRIPT_VER"]){r.scriptVer=localStorage["GC_SCRIPT_VER"]}else{r.scriptVer=999999}n(r)}else if(e.method=="setOptions"){localStorage["SERVICE_CONFIRMED"]=e.serviceConfirmed;var r={};r.gotServiceConfirmed=e.serviceConfirmed;r.savedServiceConfirmed=localStorage["SERVICE_CONFIRMED"];n(r)}else{n({})}});var servicesTimes=0;var verTimes=0;var blTimes=0;init()